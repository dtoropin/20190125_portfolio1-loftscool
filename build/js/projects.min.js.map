{"version":3,"sources":["projects.js"],"names":["addProject","_MODAL","_form","$","_setUpListners","on","_showModal","_addProject","find","_onInput","_resetForm","e","el","this","hasClass","removeClass","preventDefault","bPopup","modalClose","workingForms","resetErrorForm","hide","trigger","_fileUpload","close","form","validate","ajaxSend","done","console","log","autoClose","window","location","href","fail","show","bool","lbl","css","text","change","files","name","init"],"mappings":"AACA,IAAIA,WAAa,WAEhB,IAAIC,EAAS,KACZC,EAAQC,EAAE,mBAOPC,EAAiB,WACpBD,EAAE,oBAAoBE,GAAG,QAASC,GAClCJ,EAAMG,GAAG,SAAUE,GACnBL,EAAMM,KAAK,mBAAmBH,GAAG,QAASI,GAC1CN,EAAE,4BAA4BE,GAAG,QAASK,IAGvCD,EAAW,SAAUE,GACxB,IAAIC,EAAKT,EAAEU,MACPD,EAAGE,SAAS,UAAUF,EAAGG,YAAY,UAGtCT,EAAa,SAAUK,GAC1BA,EAAEK,iBACFf,EAASE,EAAE,eAAec,OAAO,CAChCC,YAAY,KAIVR,EAAa,SAAUC,GAC1BA,EAAEK,iBACFG,aAAaC,eAAejB,EAAE,oBAC9BA,EAAE,eAAekB,OACjBlB,EAAE,mBAAqBmB,QAAQ,SAC/BC,EAAY,GACZtB,EAAOuB,SAGJjB,EAAc,SAAUI,GAC3BA,EAAEK,iBACF,IAAIS,EAAOtB,EAAEU,MAGb,IAAKM,aAAaO,SAASD,GAAO,OAAO,EAEzCN,aAAaQ,SAJN,uBAKLC,KAAK,WACLC,QAAQC,IAAI,WACZ3B,EAAE,mBAAqBmB,QAAQ,SAC/BC,EAAY,GACZtB,EAAOuB,QACPrB,EAAE,aAAac,OAAO,CACrBC,YAAY,EACZa,UAAW,MAEZC,OAAOC,SAASC,KAAO,eAEvBC,KAAK,WACLN,QAAQC,IAAI,SACZ3B,EAAE,eAAeiC,UAIhBb,EAAc,SAAUc,GAC3B,IAAIC,EAAMnC,EAAE,sBAGZ,GAFAmC,EAAIC,IAAI,QAAS,WACjBD,EAAIE,KAAK,yBACLH,EAAM,OAAO,EACjBlC,EAAE,uBAAuBsC,OAAO,WAC/BH,EAAIC,IAAI,QAAS,WACjBD,EAAIE,KAAK3B,KAAK6B,MAAM,GAAGC,SAIzB,MAAO,CACNC,KAtEU,WACVxC,IACAmB,MAPe,GAgFjBvB,WAAW4C","sourcesContent":["// addProject for projects.html\r\nvar addProject = (function () {\r\n\r\n\tvar _MODAL = null,\r\n\t\t_form = $('.formAddProject');\r\n\r\n\tvar init = function () {\r\n\t\t_setUpListners();\r\n\t\t_fileUpload();\r\n\t};\r\n\r\n\tvar _setUpListners = function () {\r\n\t\t$('.sites-add__link').on('click', _showModal);\r\n\t\t_form.on('submit', _addProject);\r\n\t\t_form.find('input, textarea').on('input', _onInput);\r\n\t\t$('.addProject-title__close').on('click', _resetForm);\r\n\t};\r\n\r\n\tvar _onInput = function (e) {\r\n\t\tvar el = $(this);\r\n\t\tif (el.hasClass('error')) el.removeClass('error');\r\n\t};\r\n\r\n\tvar _showModal = function (e) {\r\n\t\te.preventDefault();\r\n\t\t_MODAL = $('.addProject').bPopup({\r\n\t\t\tmodalClose: false\r\n\t\t});\r\n\t};\r\n\r\n\tvar _resetForm = function (e) {\r\n\t\te.preventDefault();\r\n\t\tworkingForms.resetErrorForm($('.formAddProject'));\r\n\t\t$('.alertError').hide();\r\n\t\t$(('.formAddProject')).trigger('reset');\r\n\t\t_fileUpload(1);\r\n\t\t_MODAL.close();\r\n\t};\r\n\r\n\tvar _addProject = function (e) {\r\n\t\te.preventDefault();\r\n\t\tvar form = $(this),\r\n\t\t\turl = '/php/addProject.php';\r\n\r\n\t\tif (!workingForms.validate(form)) return false;\r\n\r\n\t\tworkingForms.ajaxSend(url)\r\n\t\t\t.done(function () {\r\n\t\t\t\tconsole.log(\"success\");\r\n\t\t\t\t$(('.formAddProject')).trigger('reset');\r\n\t\t\t\t_fileUpload(1);\r\n\t\t\t\t_MODAL.close();\r\n\t\t\t\t$('.alertAdd').bPopup({\r\n\t\t\t\t\tmodalClose: false,\r\n\t\t\t\t\tautoClose: 2000\r\n\t\t\t\t});\r\n\t\t\t\twindow.location.href = '/portfolio';\r\n\t\t\t})\r\n\t\t\t.fail(function () {\r\n\t\t\t\tconsole.log(\"error\");\r\n\t\t\t\t$('.alertError').show();\r\n\t\t\t});\r\n\t};\r\n\r\n\tvar _fileUpload = function (bool) {\r\n\t\tvar lbl = $('.file-upload__text');\r\n\t\tlbl.css('color', '#48cbe8');\r\n\t\tlbl.text('Загрузите изображение');\r\n\t\tif (bool) return false;\r\n\t\t$('.file-upload__input').change(function () {\r\n\t\t\tlbl.css('color', '#000000')\r\n\t\t\tlbl.text(this.files[0].name);\r\n\t\t});\r\n\t};\r\n\r\n\treturn {\r\n\t\tinit: init\r\n\t}\r\n\r\n})();\r\n\r\naddProject.init();"],"file":"projects.min.js"}