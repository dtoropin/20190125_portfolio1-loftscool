{"version":3,"sources":["workingForms.js"],"names":["workingForms","validate","form","elems","find","not","valid","$","each","i","val","element","position","target","pos","hasAttribute","getAttribute","value","length","classList","add","attr","siblings","my","at","qtip","content","text","this","show","event","hide","style","classes","tip","border","heigth","width","trigger","ajaxSend","url","data","FormData","append","files","jQuery","input","ajax","type","dataType","cache","contentType","processData","ajaxSendNoFile","serialize","resetErrorForm","removeClass"],"mappings":"AACA,IAAIA,aAoGI,CACNC,SAlDc,SAAUC,GACxB,IAAIC,EAAQD,EAAKE,KAAK,mBAAmBC,IAAI,wBAC5CC,GAAQ,EAYT,OAVAC,EAAEC,KAAKL,EAAO,SAAUM,EAAGC,GAC1B,IAtD0BC,EAASC,EAEhCC,EAoDCC,EAAMJ,EAAIK,aAAa,iBACxBL,EAAIM,aAAa,iBACjB,OACsB,IAArBN,EAAIO,MAAMC,SACbR,EAAIS,UAAUC,IAAI,SA1DOT,EA2DbJ,EAAEG,GA3DoBE,EA2DdE,EAzDlBD,EAAkC,SAAzBF,EAAQU,KAAK,QAAqBV,EAAQW,SAAS,OAASX,EAGxEC,EADgB,UAAbA,EACQ,CACVW,GAAI,cACJC,GAAI,eACJX,OAAQA,GAGE,CACVU,GAAI,eACJC,GAAI,cACJX,OAAQA,GAKVF,EAAQc,KAAK,CACZC,QAAS,CACRC,KAAM,WACL,OAAOpB,EAAEqB,MAAMP,KAAK,kBAGtBQ,KAAM,CACLC,MAAO,QAERC,KAAM,CACLD,MAAO,8BAERlB,SAAUA,EACVoB,MAAO,CACNC,QAAS,eACTC,IAAK,CACJC,OAAQ,EACRC,OAAQ,GACRC,MAAO,OAGPC,QAAQ,QAoBThC,GAAQ,KAGHA,GAqCPiC,SAlCc,SAAUC,GACxB,IAAIC,EAAO,IAAIC,SASf,OANAD,EAAKE,OAAO,OAAQpC,EAAE,sBAAsB,GAAGqC,MAAM,IAErDC,OAAOrC,KAAKD,EAAE,2CAA4C,SAAUE,EAAGqC,GACtEL,EAAKE,OAAOG,EAAM9B,aAAa,QAAS8B,EAAM7B,SAGxCV,EAAEwC,KAAK,CACbP,IAAKA,EACLQ,KAAM,OACNC,SAAU,OACVC,OAAO,EACPC,aAAa,EACbC,aAAa,EACbX,KAAMA,KAkBPY,eAdoB,SAAUnD,EAAMsC,GACpC,IAAIC,EAAOvC,EAAKoD,YAEhB,OAAO/C,EAAEwC,KAAK,CACbP,IAAKA,EACLQ,KAAM,OACNC,SAAU,OACVR,KAAMA,KAQPc,eA1DoB,SAAUrD,GAC9BK,EAAE,SAASwB,OACX7B,EAAKE,KAAK,mBAAmBC,IAAI,wBAAwBmD,YAAY","sourcesContent":["// other\r\nvar workingForms = (function () {\r\n\r\n\tvar _createQtip = function (element, position) {\r\n\t\t// target для custom input 'file'\r\n\t\tvar target = element.attr('type') === 'file' ? element.siblings('div') : element;\r\n\t\t// позиция тултипа\r\n\t\tif (position === 'right') {\r\n\t\t\tposition = {\r\n\t\t\t\tmy: 'center left',\r\n\t\t\t\tat: 'center right',\r\n\t\t\t\ttarget: target\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tposition = {\r\n\t\t\t\tmy: 'center right',\r\n\t\t\t\tat: 'center left',\r\n\t\t\t\ttarget: target\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// инициализация тултипа\r\n\t\telement.qtip({\r\n\t\t\tcontent: {\r\n\t\t\t\ttext: function () {\r\n\t\t\t\t\treturn $(this).attr('qtip-content');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshow: {\r\n\t\t\t\tevent: 'show'\r\n\t\t\t},\r\n\t\t\thide: {\r\n\t\t\t\tevent: 'change keydown hideTooltip'\r\n\t\t\t},\r\n\t\t\tposition: position,\r\n\t\t\tstyle: {\r\n\t\t\t\tclasses: 'qtip-mystyle',\r\n\t\t\t\ttip: {\r\n\t\t\t\t\tborder: 0,\r\n\t\t\t\t\theigth: 10,\r\n\t\t\t\t\twidth: 16\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).trigger('show');\r\n\r\n\t};\r\n\r\n\tvar resetErrorForm = function (form) {\r\n\t\t$('.qtip').hide();\r\n\t\tform.find('input, textarea').not('input[type=\"hidden\"]').removeClass('error');\r\n\t};\r\n\r\n\tvar validate = function (form) {\r\n\t\tvar elems = form.find('input, textarea').not('input[type=\"hidden\"]'),\r\n\t\t\tvalid = true;\r\n\r\n\t\t$.each(elems, function (i, val) {\r\n\t\t\tvar pos = val.hasAttribute('qtip-position')\r\n\t\t\t\t? val.getAttribute('qtip-position')\r\n\t\t\t\t: 'left';\r\n\t\t\tif (val.value.length === 0) {\r\n\t\t\t\tval.classList.add('error');\r\n\t\t\t\t_createQtip($(val), pos);\r\n\t\t\t\tvalid = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn valid;\r\n\t};\r\n\r\n\tvar ajaxSend = function (url) {\r\n\t\tvar data = new FormData();\r\n\r\n\t\t//присоединяем файл\r\n\t\tdata.append('file', $('input[type=\"file\"]')[0].files[0]);\r\n\t\t//присоединяем остальные поля\r\n\t\tjQuery.each($('input:not(input[type=\"file\"]), textarea'), function (i, input) {\r\n\t\t\tdata.append(input.getAttribute('name'), input.value);\r\n\t\t});\r\n\r\n\t\treturn $.ajax({\r\n\t\t\turl: url,\r\n\t\t\ttype: 'POST',\r\n\t\t\tdataType: 'json',\r\n\t\t\tcache: false,\r\n\t\t\tcontentType: false,\r\n\t\t\tprocessData: false,\r\n\t\t\tdata: data\r\n\t\t})\r\n\t};\r\n\r\n\tvar ajaxSendNoFile = function (form, url) {\r\n\t\tvar data = form.serialize();\r\n\r\n\t\treturn $.ajax({\r\n\t\t\turl: url,\r\n\t\t\ttype: 'POST',\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: data\r\n\t\t})\r\n\t};\r\n\r\n\treturn {\r\n\t\tvalidate: validate,\r\n\t\tajaxSend: ajaxSend,\r\n\t\tajaxSendNoFile: ajaxSendNoFile,\r\n\t\tresetErrorForm: resetErrorForm\r\n\t}\r\n\r\n})();"],"file":"workingForms.min.js"}