{"version":3,"sources":["login.js"],"names":["login","_form","$","_setUpListners","on","_loginSend","find","_onInput","hide","el","this","hasClass","removeClass","e","preventDefault","form","workingForms","validate","ajaxSendNoFile","done","result","ans","window","location","href","field","forEach","type","addClass","val","fail","show","init"],"mappings":"AACA,IAAIA,MAAQ,WAEX,IAAIC,EAAQC,EAAE,cAMVC,EAAiB,WACpBF,EAAMG,GAAG,SAAUC,GACnBJ,EAAMK,KAAK,SAASF,GAAG,QAASG,IAG7BA,EAAW,WACdL,EAAE,uBAAuBM,OACzB,IAAIC,EAAKP,EAAEQ,MACPD,EAAGE,SAAS,UAAUF,EAAGG,YAAY,UAGtCP,EAAa,SAAUQ,GAC1BA,EAAEC,iBAEF,IAAIC,EAAOb,EAAEQ,MAGb,IAAKM,aAAaC,SAASF,GAAO,OAAO,EAEzCC,aAAaE,eAAeH,EAJrB,iBAKLI,KAAK,SAAUC,GACG,OAAfA,EAAOC,IACTC,OAAOC,SAASC,KAAO,cAEvBJ,EAAOK,MAAMC,QAAQ,SAAUC,GAC9BZ,EAAKT,KAAK,eAAiBqB,EAAO,MAAMC,SAAS,OACrC,SAATD,GACFZ,EAAKT,KAAK,eAAiBqB,EAAO,MAAME,IAAI,MAG9Cb,aAAaC,SAASF,MAGvBe,KAAK,WACL5B,EAAE,uBAAuB6B,UAK5B,MAAO,CACNC,KA5CU,WACV7B,MALU,GAqDZH,MAAMgC","sourcesContent":["// login.js for login.html\r\nvar login = (function () {\r\n\r\n\tvar _form = $('.formLogin');\r\n\r\n\tvar init = function () {\r\n\t\t_setUpListners();\r\n\t};\r\n\r\n\tvar _setUpListners = function () {\r\n\t\t_form.on('submit', _loginSend);\r\n\t\t_form.find('input').on('input', _onInput);\r\n\t};\r\n\r\n\tvar _onInput = function () {\r\n\t\t$('.login-block__error').hide();\r\n\t\tvar el = $(this);\r\n\t\tif (el.hasClass('error')) el.removeClass('error');\r\n\t};\r\n\r\n\tvar _loginSend = function (e) {\r\n\t\te.preventDefault();\r\n\r\n\t\tvar form = $(this),\r\n\t\t\turl = '/php/auth.php';\r\n\r\n\t\tif (!workingForms.validate(form)) return false;\r\n\r\n\t\tworkingForms.ajaxSendNoFile(form, url)\r\n\t\t\t.done(function (result) {\r\n\t\t\t\tif(result.ans === 'OK') {\r\n\t\t\t\t\twindow.location.href = '/portfolio';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.field.forEach(function (type) {\r\n\t\t\t\t\t\tform.find(\"input[name='\" + type + \"']\").addClass('err');\r\n\t\t\t\t\t\tif(type === 'pass') {\r\n\t\t\t\t\t\t\tform.find(\"input[name='\" + type + \"']\").val('');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tworkingForms.validate(form);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.fail(function () {\r\n\t\t\t\t$('.login-block__error').show();\r\n\t\t\t});\r\n\t};\r\n\r\n\r\n\treturn {\r\n\t\tinit: init\r\n\t}\r\n\r\n})();\r\n\r\nlogin.init();"],"file":"login.min.js"}